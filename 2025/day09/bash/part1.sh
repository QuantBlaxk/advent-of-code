join -1 1 -o 1.2,1.3,2.2,2.3 \
  <(sed -e 's/,/ /;s/^/k /' ../input.txt) \
  <(sed -e 's/,/ /;s/^/k /' ../input.txt) | \
sed 's/\([0-9]\+\) \([0-9]\+\) \([0-9]\+\) \([0-9]\+\)/(sqrt((\1-\3)^2)+1)*(sqrt((\2-\4)^2)+1)/' | \
bc | sort -nr | head -1